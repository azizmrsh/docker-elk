# ุฏููู ุฅุนุฏุงุฏุงุช ELK Stack ุงูุดุงูู

## ูุธุฑุฉ ุนุงูุฉ
ูุฐุง ุงูุฏููู ููุถุญ ุฌููุน ุฅุนุฏุงุฏุงุช ูุฌููุนุฉ ELK Stack (Elasticsearch, Logstash, Kibana) ูุน ุดุฑุญ ููุตู ููู ุฅุนุฏุงุฏ ููุธููุชู ูุงูุชูุตูุงุช ุงูููุงุณุจุฉ ูุฎุงุฏู VPS ุงูุฎุงุต ุจู.

### ููุงุตูุงุช VPS ุงูุญุงููุฉ
- **ููุน ุงูุฎุทุฉ**: KVM 8
- **ุงููุนุงูุฌ**: 8 ุฃูููุฉ (CPU cores)
- **ุงูุฐุงูุฑุฉ**: 32 GB RAM
- **ูุณุงุญุฉ ุงูุชุฎุฒูู**: 400 GB SSD
- **ุชุงุฑูุฎ ุงูุชูุงุก ุงูุตูุงุญูุฉ**: 2026-08-29
- **ุงูุชุฌุฏูุฏ ุงูุชููุงุฆู**: ููุนู (Auto-renewal: On)

### ุชูููู ุงูููุงุฑุฏ ุงููุชุงุญุฉ:
- **ููุฉ ูุนุงูุฌุฉ ููุชุงุฒุฉ**: 8 ุฃูููุฉ ูุงููุฉ ูุชุดุบูู ELK Stack ุจููุงุกุฉ ุนุงููุฉ
- **ุฐุงูุฑุฉ ูููุฑุฉ**: 32GB ุชุณูุญ ุจุชุฎุตูุต ุฐุงูุฑุฉ ูุจูุฑุฉ ูู Elasticsearch ู Logstash
- **ุชุฎุฒูู ูุงูู**: 400GB ููุงุณุจ ูุชุฎุฒูู ุงูุจูุงูุงุช ูุงูููุงุฑุณ ููุชุฑุฉ ุทูููุฉ
- **ุงุณุชูุฑุงุฑ ุทููู ุงููุฏู**: ุตุงูุญ ุญุชู 2026 ูุน ุชุฌุฏูุฏ ุชููุงุฆู

---

## 1. ููู Docker Compose ุงูุฑุฆูุณู

### ุงูููู: `docker-compose.yml`

| ุงูุฎุฏูุฉ | ุงููุตู | ุงูููุงูุฐ ุงููุณุชุฎุฏูุฉ | ุงูุฅุนุฏุงุฏ ุงูุญุงูู | ุงูุชูุตูุฉ ุงููุญุณูุฉ | ุงูุณุจุจ |
|---------|-------|------------------|----------------|------------------|--------|
| **setup** | ุฎุฏูุฉ ุงูุฅุนุฏุงุฏ ุงูุฃููู ูููุณุชุฎุฏููู ูุงูุฃุฏูุงุฑ | - | ุชุดุบูู ุนูุฏ ุงูุญุงุฌุฉ | ุชุดุบูู ูุฑุฉ ูุงุญุฏุฉ ููุท | ุฅุนุฏุงุฏ ุฃููู ููุฃูุงู |
| **kibana-genkeys** | ุชูููุฏ ููุงุชูุญ ุงูุชุดููุฑ ูู Kibana | - | ุบูุฑ ููุนู | ุชุดุบูู ูุชูุนูู ุงูููุงุชูุญ | ุญูุงูุฉ ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ |
| **elasticsearch** | ูุญุฑู ุงูุจุญุซ ูุงูููุฑุณุฉ ุงูุฑุฆูุณู | 9200, 9300 | 512MB Java Heap | **12-16GB Java Heap** | ุงุณุชุบูุงู 40-50% ูู ุงูุฐุงูุฑุฉ ุงููุชุงุญุฉ |
| **logstash** | ูุนุงูุฌ ููุญูู ุงูุจูุงูุงุช | 5044, 50000, 9600 | 256MB Java Heap | **4-6GB Java Heap** | ูุนุงูุฌุฉ ุฃุณุฑุน ููุจูุงูุงุช ุงููุจูุฑุฉ |
| **kibana** | ูุงุฌูุฉ ุงููุณุชุฎุฏู ูุงูุชุตูุฑ | 5601 | ุฅุนุฏุงุฏ ุงูุชุฑุงุถู | **2-4GB Memory Limit** | ุฃุฏุงุก ุฃูุถู ูููุงุฌูุฉ |

### ุงูุชูุตูุงุช ุงููุญุณูุฉ ูู VPS (32GB RAM, 8 CPU):

```yaml
# ุฅุนุฏุงุฏุงุช ูุญุณูุฉ ููุฐุงูุฑุฉ - ุงุณุชุบูุงู ุฃูุซู ููููุงุฑุฏ
services:
  elasticsearch:
    environment:
      ES_JAVA_OPTS: -Xms12g -Xmx12g    # Elasticsearch: 12GB (37.5% ูู ุงูุฐุงูุฑุฉ)
    deploy:
      resources:
        limits:
          memory: 16g
          cpus: '4.0'                   # 4 ุฃูููุฉ ูู ุฃุตู 8
        reservations:
          memory: 12g
          cpus: '2.0'

  logstash:
    environment:
      LS_JAVA_OPTS: -Xms4g -Xmx4g      # Logstash: 4GB (12.5% ูู ุงูุฐุงูุฑุฉ)
    deploy:
      resources:
        limits:
          memory: 6g
          cpus: '2.0'                   # 2 ุฃูููุฉ
        reservations:
          memory: 4g
          cpus: '1.0'

  kibana:
    deploy:
      resources:
        limits:
          memory: 4g                    # Kibana: 4GB
          cpus: '1.0'                   # 1 ููุงุฉ
        reservations:
          memory: 2g
          cpus: '0.5'
```

### ุชูุฒูุน ุงูุฐุงูุฑุฉ ุงูููุชุฑุญ (32GB ุฅุฌูุงูู):
- **Elasticsearch**: 12GB (37.5%) - ุงูุฃููููุฉ ุงูุนููุง
- **Logstash**: 4GB (12.5%) - ูุนุงูุฌุฉ ุงูุจูุงูุงุช
- **Kibana**: 4GB (12.5%) - ูุงุฌูุฉ ุงููุณุชุฎุฏู
- **ุงููุธุงู**: 6GB (18.75%) - ูุธุงู ุงูุชุดุบูู ูุงูุฎุฏูุงุช
- **ุงุญุชูุงุทู**: 6GB (18.75%) - ููุชุทุจููุงุช ุงูุฃุฎุฑู ูุงูููู ุงููุณุชูุจูู

---

## 2. ุฅุนุฏุงุฏุงุช Elasticsearch

### ุงูููู: `elasticsearch/config/elasticsearch.yml`

| ุงูุฅุนุฏุงุฏ | ุงููููุฉ ุงูุญุงููุฉ | ุงููุตู | ุงูุชูุตูุฉ ุงููุญุณูุฉ | ุงูุณุจุจ | ุงูุฃูููุฉ |
|---------|-----------------|-------|------------------|--------|----------|
| `cluster.name` | docker-cluster | ุงุณู ุงูููุงุณุชุฑ | `bms-production-cluster` | ุชูููุฒ ุฃูุถู ูู ุงูุจูุฆุฉ ุงูุฅูุชุงุฌูุฉ | ูุชูุณุทุฉ |
| `network.host` | 0.0.0.0 | ุนููุงู ุงูุดุจูุฉ | **ุงูุงุญุชูุงุธ ุจู 0.0.0.0** | ูุณูุญ ุจุงููุตูู ูู ุฌููุน ุงููุงุฌูุงุช ูู Docker | ุนุงููุฉ |
| `xpack.license.self_generated.type` | trial | ููุน ุงูุชุฑุฎูุต | **ุงูุงุญุชูุงุธ ุจู trial** | ูููุฑ ุฌููุน ุงูููุฒุงุช ููุฏุฉ 30 ููู | ูุชูุณุทุฉ |
| `xpack.security.enabled` | true | ุชูุนูู ุงูุฃูุงู | **ูุฌุจ ุงูุงุญุชูุงุธ ุจู true** | ุญูุงูุฉ ุฃุณุงุณูุฉ ุถุฏ ุงููุตูู ุบูุฑ ุงููุตุฑุญ | ุนุงููุฉ ุฌุฏุงู |
| `ES_JAVA_OPTS` | -Xms512m -Xmx512m | ุฐุงูุฑุฉ Java | **-Xms12g -Xmx12g** | ุงุณุชุบูุงู ุฃูุซู ูููุงุฑุฏ VPS (32GB) | ุนุงููุฉ ุฌุฏุงู |

### ุฅุนุฏุงุฏุงุช ุฅุถุงููุฉ ููุชุฑุญุฉ:

```yaml
# ุฅุนุฏุงุฏุงุช ุงูุฃุฏุงุก
indices.memory.index_buffer_size: 20%
indices.memory.min_index_buffer_size: 96mb

# ุฅุนุฏุงุฏุงุช ุงูุชุฎุฒูู
path.data: /usr/share/elasticsearch/data
path.logs: /usr/share/elasticsearch/logs

# ุฅุนุฏุงุฏุงุช ุงูุดุจูุฉ
http.port: 9200
transport.port: 9300

# ุฅุนุฏุงุฏุงุช ุงูุฃูุงู ุงููุชูุฏูุฉ
xpack.security.transport.ssl.enabled: true
xpack.security.http.ssl.enabled: false  # ููุชุทููุฑ ููุท
```

---

## 3. ุฅุนุฏุงุฏุงุช Kibana

### ุงูููู: `kibana/config/kibana.yml`

| ุงูุฅุนุฏุงุฏ | ุงููููุฉ ุงูุญุงููุฉ | ุงููุตู | ุงูุชูุตูุฉ ุงููุญุณูุฉ | ุงูุณุจุจ | ุงูุฃูููุฉ |
|---------|-----------------|-------|------------------|--------|----------|
| `server.name` | kibana | ุงุณู ุงูุฎุงุฏู | `bms-kibana-server` | ุชูููุฒ ุฃูุถู ูู ุงูุณุฌูุงุช ูุงููุฑุงูุจุฉ | ููุฎูุถุฉ |
| `server.host` | 0.0.0.0 | ุนููุงู ุงูุฎุงุฏู | **ุงูุงุญุชูุงุธ ุจู 0.0.0.0** | ูุณูุญ ุจุงููุตูู ูู ุฌููุน ุงููุงุฌูุงุช | ุนุงููุฉ |
| `elasticsearch.hosts` | http://elasticsearch:9200 | ุนูุงููู Elasticsearch | **ุงูุงุญุชูุงุธ ุจุงููููุฉ ุงูุญุงููุฉ** | ูุนูู ุจุดูู ุตุญูุญ ูู Docker Compose | ุนุงููุฉ |
| `elasticsearch.username` | kibana_system | ุงุณู ุงููุณุชุฎุฏู | **ุงูุงุญุชูุงุธ ุจู kibana_system** | ูุณุชุฎุฏู ูุฏูุฌ ูุฎุตุต ูู Kibana | ุนุงููุฉ |
| `elasticsearch.password` | ${KIBANA_SYSTEM_PASSWORD} | ูููุฉ ุงููุฑูุฑ | **ุงุณุชุฎุฏุงู ูููุฉ ูุฑูุฑ ูููุฉ** | ุญูุงูุฉ ุงููุตูู ูู Elasticsearch | ุนุงููุฉ ุฌุฏุงู |
| `monitoring.ui.container.elasticsearch.enabled` | true | ูุฑุงูุจุฉ Elasticsearch | **ุงูุงุญุชูุงุธ ุจู true** | ูุฑุงูุจุฉ ุฃุฏุงุก ูุญุงูุฉ Elasticsearch | ูุชูุณุทุฉ |
| `monitoring.ui.container.logstash.enabled` | true | ูุฑุงูุจุฉ Logstash | **ุงูุงุญุชูุงุธ ุจู true** | ูุฑุงูุจุฉ ูุนุงูุฌุฉ ุงูุจูุงูุงุช | ูุชูุณุทุฉ |
| `xpack.encryptedSavedObjects.encryptionKey` | ุบูุฑ ููุนู | ููุชุงุญ ุชุดููุฑ ุงููุงุฆูุงุช | **ุชูุนูู ููุชุงุญ 32 ุญุฑู** | ุญูุงูุฉ ุงูุจูุงูุงุช ุงููุญููุธุฉ ุงูุญุณุงุณุฉ | ุนุงููุฉ |

### ุฅุนุฏุงุฏุงุช Fleet ุงููุชูุฏูุฉ:

| ุงููููู | ุงููุตู | ุงูุชูุตูุฉ |
|---------|-------|----------|
| `xpack.fleet.agents.fleet_server.hosts` | ุฎูุงุฏู Fleet Server | ุชูุนูู ุนูุฏ ุงูุญุงุฌุฉ ูุฅุฏุงุฑุฉ Agents |
| `xpack.fleet.packages` | ุงูุญุฒู ุงููุซุจุชุฉ | ุงูุงุญุชูุงุธ ุจุงูุญุฒู ุงูุฃุณุงุณูุฉ ููุท |

---

## 4. ุฅุนุฏุงุฏุงุช Logstash

### ุงูููู: `logstash/config/logstash.yml`

| ุงูุฅุนุฏุงุฏ | ุงููููุฉ ุงูุญุงููุฉ | ุงููุตู | ุงูุชูุตูุฉ ุงููุญุณูุฉ | ุงูุณุจุจ | ุงูุฃูููุฉ |
|---------|-----------------|-------|------------------|--------|----------|
| `api.http.host` | 0.0.0.0 | ุนููุงู API | **ุงูุงุญุชูุงุธ ุจู 0.0.0.0** | ูุณูุญ ุจูุฑุงูุจุฉ Logstash ูู Kibana | ูุชูุณุทุฉ |
| `node.name` | logstash | ุงุณู ุงูุนูุฏุฉ | `bms-logstash-node` | ุชูููุฒ ุฃูุถู ูู ุงููุฑุงูุจุฉ ูุงูุณุฌูุงุช | ููุฎูุถุฉ |
| `LS_JAVA_OPTS` | -Xms256m -Xmx256m | ุฐุงูุฑุฉ Java | **-Xms4g -Xmx4g** | ูุนุงูุฌุฉ ุฃุณุฑุน ููุจูุงูุงุช ุงููุจูุฑุฉ | ุนุงููุฉ ุฌุฏุงู |
| `pipeline.workers` | ุงูุชุฑุงุถู (1) | ุนุฏุฏ ุงูุนูุงู | **4 workers** | ุงุณุชุบูุงู 50% ูู ุฃูููุฉ ุงููุนุงูุฌ | ุนุงููุฉ |
| `pipeline.batch.size` | 125 | ุญุฌู ุงูุฏูุนุฉ | **1000** | ูุนุงูุฌุฉ ุฃูุซุฑ ููุงุกุฉ ููุจูุงูุงุช | ูุชูุณุทุฉ |
| `queue.type` | memory | ููุน ุงูุทุงุจูุฑ | **persisted** | ุญูุงูุฉ ูู ููุฏุงู ุงูุจูุงูุงุช ุนูุฏ ุฅุนุงุฏุฉ ุงูุชุดุบูู | ุนุงููุฉ |

### ุฅุนุฏุงุฏุงุช ุฅุถุงููุฉ ููุชุฑุญุฉ:

```yaml
# ุฅุนุฏุงุฏุงุช ุงูุฃุฏุงุก
pipeline.workers: 4                    # ุนุฏุฏ ุงูุนูุงู (25% ูู ุงูุฃูููุฉ)
pipeline.batch.size: 1000              # ุญุฌู ุงูุฏูุนุฉ
pipeline.batch.delay: 50               # ุชุฃุฎูุฑ ุงูุฏูุนุฉ ุจุงููููู ุซุงููุฉ

# ุฅุนุฏุงุฏุงุช ุงูุฐุงูุฑุฉ
queue.type: persisted                  # ููุน ุงูุทุงุจูุฑ ุงููุณุชูุฑ
queue.max_bytes: 2gb                   # ุงูุญุฏ ุงูุฃูุตู ูุญุฌู ุงูุทุงุจูุฑ

# ุฅุนุฏุงุฏุงุช ุงููุฑุงูุจุฉ
monitoring.enabled: true
monitoring.elasticsearch.hosts: ["http://elasticsearch:9200"]
```

### ุงูููู: `logstash/config/pipelines.yml`

| ุฎุท ุงููุนุงูุฌุฉ | ุงูููู | ุงููุตู | ุงูุชูุตูุฉ |
|--------------|-------|-------|----------|
| `main` | logstash.conf | ุฎุท ุงููุนุงูุฌุฉ ุงูุฑุฆูุณู | ููุจูุงูุงุช ุงูุนุงูุฉ |
| `mysql-books` | mysql-books.conf | ูุนุงูุฌุฉ ุจูุงูุงุช ุงููุชุจ | ูุฎุตุต ููุงุนุฏุฉ ุจูุงูุงุช BMS |

---

## 5. ุฅุนุฏุงุฏุงุช ุฎุทูุท ุงููุนุงูุฌุฉ

### ุงูููู: `logstash/pipeline/logstash.conf`

| ุงููุณู | ุงููููุฐ/ุงูุฅุนุฏุงุฏ | ุงููุตู | ุงูุชูุตูุฉ |
|-------|---------------|-------|----------|
| **Input - Beats** | 5044 | ุงุณุชูุจุงู ุจูุงูุงุช ูู Filebeat/Metricbeat | ุงูุงุญุชูุงุธ ุจุงูุฅุนุฏุงุฏ |
| **Input - TCP** | 50000 | ุงุณุชูุจุงู ุจูุงูุงุช TCP ุนุงูุฉ | ูููู ุชุนุทููู ุฅุฐุง ูู ููุณุชุฎุฏู |
| **Output - Elasticsearch** | elasticsearch:9200 | ุฅุฑุณุงู ุงูุจูุงูุงุช ูู Elasticsearch | ุงูุงุญุชูุงุธ ุจุงูุฅุนุฏุงุฏ |

### ุงูููู: `logstash/pipeline/mysql-books.conf`

| ุงููููู | ุงูุฅุนุฏุงุฏ | ุงููููุฉ ุงูุญุงููุฉ | ุงูุชูุตูุฉ ุงููุญุณูุฉ | ุงูุณุจุจ | ุงูุฃูููุฉ |
|---------|---------|-----------------|------------------|--------|----------|
| **JDBC Connection** | jdbc_connection_string | MySQL ุนูู 145.223.98.97:3306 | **ุฅุถุงูุฉ SSL ูุชุดููุฑ ุงูุงุชุตุงู** | ุญูุงูุฉ ุจูุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฃุซูุงุก ุงูููู | ุนุงููุฉ |
| **Schedule** | schedule | ูู ุฏูููุฉ (\* \* \* \* \*) | **ูู 5 ุฏูุงุฆู (\*/5 \* \* \* \*)** | ุชูููู ุงูุญูู ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช | ุนุงููุฉ |
| **Batch Size** | LIMIT | 10 ุณุฌูุงุช | **500-1000 ุณุฌู** | ูุนุงูุฌุฉ ุฃูุซุฑ ููุงุกุฉ ูุน ููุงุฑุฏ VPS ุงููุจูุฑุฉ | ูุชูุณุทุฉ |
| **Index Name** | index | book-pages | **book-pages-{+YYYY.MM}** | ุชูุธูู ุฃูุถู ููุจูุงูุงุช ุญุณุจ ุงูุดูุฑ | ูุชูุณุทุฉ |
| **Character Encoding** | charset | UTF-8 | **ุงูุงุญุชูุงุธ ุจู UTF-8** | ุฏุนู ูุงูู ูููุตูุต ุงูุนุฑุจูุฉ | ุนุงููุฉ |
| **Connection Pool** | ุบูุฑ ูุญุฏุฏ | ุงุชุตุงู ูุงุญุฏ | **ุฅุถุงูุฉ connection pooling** | ุฃุฏุงุก ุฃูุถู ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช | ูุชูุณุทุฉ |

---

## 6. ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุงููุทููุจุฉ

### ุงูููู: `.env`

| ุงููุชุบูุฑ | ุงููุตู | ุงูุชูุตูุฉ | ุงูุฃูููุฉ |
|---------|-------|----------|----------|
| `ELASTIC_VERSION` | ุฅุตุฏุงุฑ ELK Stack | 8.11.0 ุฃู ุฃุญุฏุซ | ุนุงููุฉ |
| `ELASTIC_PASSWORD` | ูููุฉ ูุฑูุฑ ุงููุณุชุฎุฏู ุงูุฑุฆูุณู | ูููุฉ ูุฑูุฑ ูููุฉ (16+ ุญุฑู) | ุนุงููุฉ ุฌุฏุงู |
| `LOGSTASH_INTERNAL_PASSWORD` | ูููุฉ ูุฑูุฑ Logstash | ูููุฉ ูุฑูุฑ ูููุฉ | ุนุงููุฉ |
| `KIBANA_SYSTEM_PASSWORD` | ูููุฉ ูุฑูุฑ ูุธุงู Kibana | ูููุฉ ูุฑูุฑ ูููุฉ | ุนุงููุฉ |
| `METRICBEAT_INTERNAL_PASSWORD` | ูููุฉ ูุฑูุฑ Metricbeat | ูููุฉ ูุฑูุฑ ูููุฉ | ูุชูุณุทุฉ |
| `FILEBEAT_INTERNAL_PASSWORD` | ูููุฉ ูุฑูุฑ Filebeat | ูููุฉ ูุฑูุฑ ูููุฉ | ูุชูุณุทุฉ |

---

## 7. ุชูุตูุงุช ุงูุฃูุงู

### ุฅุนุฏุงุฏุงุช ุงูุฃูุงู ุงูุฃุณุงุณูุฉ

| ุงูุฅุนุฏุงุฏ | ุงูุชูุตูุฉ | ุงูุณุจุจ |
|---------|----------|--------|
| **ูููุงุช ุงููุฑูุฑ** | ุงุณุชุฎุฏุงู ูููุงุช ูุฑูุฑ ูููุฉ (16+ ุญุฑู) | ููุน ุงูุงุฎุชุฑุงู |
| **ููุงุชูุญ ุงูุชุดููุฑ** | ุชูุนูู ููุงุชูุญ ุงูุชุดููุฑ ูู Kibana | ุญูุงูุฉ ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ |
| **SSL/TLS** | ุชูุนูู HTTPS ูู ุงูุฅูุชุงุฌ | ุชุดููุฑ ุงูุจูุงูุงุช ุงููููููุฉ |
| **Firewall** | ุชูููุฏ ุงููุตูู ููููุงูุฐ | ุงูุณูุงุญ ููุท ููุนูุงููู ุงููุตุฑุญ ุจูุง |

### ุฃูุงูุฑ ุชูุนูู ููุงุชูุญ ุงูุชุดููุฑ:

```bash
# ุชูููุฏ ููุงุชูุญ ุงูุชุดููุฑ
docker compose up kibana-genkeys

# ุฅุถุงูุฉ ุงูููุงุชูุญ ุฅูู kibana.yml
xpack.security.encryptionKey: "your-32-char-key-here"
xpack.encryptedSavedObjects.encryptionKey: "your-32-char-key-here"
xpack.reporting.encryptionKey: "your-32-char-key-here"
```

---

## 8. ุชูุตูุงุช ุงูุฃุฏุงุก ูู VPS

### ุชุญุณูู ุงุณุชุฎุฏุงู ุงูุฐุงูุฑุฉ

| ุงูุฎุฏูุฉ | ุงูุฅุนุฏุงุฏ ุงูุญุงูู | ุงูุชูุตูุฉ ุงููุญุณูุฉ (32GB) | ุงููุณุจุฉ | ุงูุณุจุจ | ุงูุฃููููุฉ |
|---------|----------------|------------------------|--------|--------|----------|
| **Elasticsearch** | 512MB Java Heap | **12GB Java Heap** | 37.5% | ูุญุฑู ุงูุจุญุซ ูุญุชุงุฌ ุฐุงูุฑุฉ ูุจูุฑุฉ ููููุฑุณุฉ ูุงูุจุญุซ | ุนุงููุฉ ุฌุฏุงู |
| **Logstash** | 256MB Java Heap | **4GB Java Heap** | 12.5% | ูุนุงูุฌุฉ ุงูุจูุงูุงุช ุงููุจูุฑุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช | ุนุงููุฉ |
| **Kibana** | ุฅุนุฏุงุฏ ุงูุชุฑุงุถู | **4GB Memory Limit** | 12.5% | ูุงุฌูุฉ ูุณุชุฎุฏู ุณุฑูุนุฉ ููุชุฌุงูุจุฉ | ูุชูุณุทุฉ |
| **ุงููุธุงู ูุงูุฎุฏูุงุช** | ุบูุฑ ูุญุฏุฏ | **6GB ูุฎุตุต** | 18.75% | ูุธุงู ุงูุชุดุบูู ูDocker ูุฎุฏูุงุช ุฃุฎุฑู | ุนุงููุฉ |
| **ุงุญุชูุงุทู ูููู** | - | **6GB ูุชุงุญ** | 18.75% | ููุชูุณุน ุงููุณุชูุจูู ูุชุทุจููุงุช ุฅุถุงููุฉ | ูุชูุณุทุฉ |

### ููุงุฑูุฉ ุงูุฃุฏุงุก ุงููุชููุน:
| ุงููุคุดุฑ | ุงูุฅุนุฏุงุฏ ุงูุญุงูู | ุจุนุฏ ุงูุชุญุณูู | ุงูุชุญุณู ุงููุชููุน |
|---------|----------------|-------------|------------------|
| **ุณุฑุนุฉ ุงูุจุญุซ** | ุจุทูุก ูุน ุงูุจูุงูุงุช ุงููุจูุฑุฉ | ุณุฑูุน ุฌุฏุงู | **20-30x ุฃุณุฑุน** |
| **ูุนุงูุฌุฉ ุงูุจูุงูุงุช** | 10 ุณุฌูุงุช/ุฏูููุฉ | 500-1000 ุณุฌู/5 ุฏูุงุฆู | **10-20x ุฃูุซุฑ ููุงุกุฉ** |
| **ุงุณุชุฌุงุจุฉ Kibana** | ุจุทูุก ุฃุญูุงูุงู | ุณุฑูุน ููุชุฌุงูุจ | **5-10x ุชุญุณู** |
| **ุงุณุชูุฑุงุฑ ุงููุธุงู** | ูุฏ ูุชููู ูุน ุงูุญูู ุงูุนุงูู | ูุณุชูุฑ ุชุญุช ุงูุถุบุท | **ุงุณุชูุฑุงุฑ ูุงูู** |

### ุฅุนุฏุงุฏุงุช Docker Compose ุงููุญุณูุฉ:

```yaml
services:
  elasticsearch:
    environment:
      ES_JAVA_OPTS: -Xms12g -Xmx12g
    deploy:
      resources:
        limits:
          memory: 16g
        reservations:
          memory: 12g

  logstash:
    environment:
      LS_JAVA_OPTS: -Xms4g -Xmx4g
    deploy:
      resources:
        limits:
          memory: 6g
        reservations:
          memory: 4g
```

---

## 9. ูุฑุงูุจุฉ ุงูุฃุฏุงุก

### ูุคุดุฑุงุช ุงูุฃุฏุงุก ุงููููุฉ

| ุงููุคุดุฑ | ุงููุตู | ุงููููุฉ ุงููุซูู | ููููุฉ ุงููุฑุงูุจุฉ |
|---------|-------|---------------|----------------|
| **CPU Usage** | ุงุณุชุฎุฏุงู ุงููุนุงูุฌ | < 80% | htop, docker stats |
| **Memory Usage** | ุงุณุชุฎุฏุงู ุงูุฐุงูุฑุฉ | < 85% | free -h, docker stats |
| **Disk I/O** | ุนูููุงุช ุงููุฑุงุกุฉ/ุงููุชุงุจุฉ | < 80% | iostat, iotop |
| **Elasticsearch Heap** | ุฐุงูุฑุฉ Java ูู ES | < 75% | Kibana Monitoring |
| **Logstash Heap** | ุฐุงูุฑุฉ Java ูู LS | < 75% | Kibana Monitoring |

### ุฃูุงูุฑ ุงููุฑุงูุจุฉ:

```bash
# ูุฑุงูุจุฉ ุงุณุชุฎุฏุงู ุงูููุงุฑุฏ
docker stats

# ูุฑุงูุจุฉ ุณุฌูุงุช ุงูุฎุฏูุงุช
docker compose logs -f elasticsearch
docker compose logs -f logstash
docker compose logs -f kibana

# ูุญุต ุญุงูุฉ Elasticsearch
curl -X GET "localhost:9200/_cluster/health?pretty"
```

---

## 10. ุงููุณุฎ ุงูุงุญุชูุงุทู ูุงูุงุณุชุนุงุฏุฉ

### ุงุณุชุฑุงุชูุฌูุฉ ุงููุณุฎ ุงูุงุญุชูุงุทู

| ุงููููู | ุงูุชูุฑุงุฑ | ุงูุทุฑููุฉ | ุงูุฃูููุฉ |
|---------|---------|---------|----------|
| **ุจูุงูุงุช Elasticsearch** | ููููุงู | Snapshot API | ุนุงููุฉ ุฌุฏุงู |
| **ุฅุนุฏุงุฏุงุช ุงูุชูููู** | ุฃุณุจูุนูุงู | ูุณุฎ ุงููููุงุช | ุนุงููุฉ |
| **ูุงุนุฏุฉ ุจูุงูุงุช MySQL** | ููููุงู | mysqldump | ุนุงููุฉ ุฌุฏุงู |

### ุฃูุงูุฑ ุงููุณุฎ ุงูุงุญุชูุงุทู:

```bash
# ุฅูุดุงุก snapshot ูู Elasticsearch
curl -X PUT "localhost:9200/_snapshot/backup_repo/snapshot_$(date +%Y%m%d)" \
  -H 'Content-Type: application/json' \
  -d '{ "indices": "book-pages", "ignore_unavailable": true }'

# ูุณุฎ ุงุญุชูุงุทู ููููุงุช ุงูุฅุนุฏุงุฏุงุช
tar -czf elk-config-backup-$(date +%Y%m%d).tar.gz \
  elasticsearch/config/ kibana/config/ logstash/config/ docker-compose.yml .env
```

---

## 11. ุงุณุชูุดุงู ุงูุฃุฎุทุงุก ูุฅุตูุงุญูุง

### ุงููุดุงูู ุงูุดุงุฆุนุฉ ูุงูุญููู

| ุงููุดููุฉ | ุงูุณุจุจ ุงููุญุชูู | ุงูุญู |
|---------|---------------|------|
| **Elasticsearch ูุง ูุจุฏุฃ** | ููุต ูู ุงูุฐุงูุฑุฉ | ุฒูุงุฏุฉ heap size ุฃู ุชูููู ุงุณุชุฎุฏุงู ุงูุฐุงูุฑุฉ |
| **Kibana ูุง ูุชุตู ุจู ES** | ูุดููุฉ ูู ุงููุตุงุฏูุฉ | ุงูุชุญูู ูู ูููุงุช ุงููุฑูุฑ ูู .env |
| **Logstash ูุง ูุณุชูุจู ุจูุงูุงุช** | ูุดููุฉ ูู ุงูููุงูุฐ | ุงูุชุญูู ูู ุฅุนุฏุงุฏุงุช ุงูุดุจูุฉ ูุงูููุงูุฐ |
| **ุจุทุก ูู ุงูุงุณุชุนูุงูุงุช** | ููุฑุณุฉ ุบูุฑ ูุญุณูุฉ | ุชุญุณูู mapping ูุฅุนุฏุงุฏุงุช ุงูููุฑุณ |
| **ุงูุชูุงุก ุงููุฑุต ุงูุตูุจ** | ุชุฑุงูู ุงูุจูุงูุงุช | ุฅุนุฏุงุฏ ุณูุงุณุงุช ุญุฐู ุงูุจูุงูุงุช ุงููุฏููุฉ |

### ุฃูุงูุฑ ุงูุชุดุฎูุต:

```bash
# ูุญุต ุญุงูุฉ ุงูุฎุฏูุงุช
docker compose ps

# ูุญุต ุณุฌูุงุช ุงูุฃุฎุทุงุก
docker compose logs elasticsearch | grep ERROR
docker compose logs logstash | grep ERROR
docker compose logs kibana | grep ERROR

# ูุญุต ุงุณุชุฎุฏุงู ุงูููุงุฑุฏ
docker stats --no-stream

# ูุญุต ูุณุงุญุฉ ุงููุฑุต
df -h
du -sh /var/lib/docker/volumes/
```

---

## 12. ุฅุนุฏุงุฏุงุช Extensions (ุงูุฅุถุงูุงุช)

### Filebeat - ุฌูุน ูููุงุช ุงูุณุฌูุงุช

| ุงูุฅุนุฏุงุฏ | ุงููุตู | ุงูุชูุตูุฉ |
|---------|-------|----------|
| **ุงููุณุงุฑุงุช ุงููุฑุงูุจุฉ** | `/var/log/*.log` | ุฅุถุงูุฉ ูุณุงุฑุงุช ุณุฌูุงุช ุงูุชุทุจููุงุช |
| **ูุนุฏู ุงูุฅุฑุณุงู** | ูู 10 ุซูุงู | ุชูููู ุฅูู 30-60 ุซุงููุฉ ููุฅูุชุงุฌ |
| **ุงููุฑุดุญุงุช** | ุชุตููุฉ ุงูุณุฌูุงุช | ุฅุถุงูุฉ ูุฑุดุญุงุช ูุชูููู ุงูุถูุถุงุก |

### Metricbeat - ูุฑุงูุจุฉ ุงูุฃุฏุงุก

| ุงููุคุดุฑ | ุงููุตู | ุงูุฃูููุฉ |
|---------|-------|----------|
| **System Module** | ูุฑุงูุจุฉ ุงููุธุงู | ุนุงููุฉ |
| **Docker Module** | ูุฑุงูุจุฉ ุงูุญุงููุงุช | ุนุงููุฉ |
| **MySQL Module** | ูุฑุงูุจุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช | ูุชูุณุทุฉ |

### Heartbeat - ูุฑุงูุจุฉ ุงูุชููุฑ

| ุงูุฎุฏูุฉ | URL | ุงูุชูุฑุงุฑ |
|---------|-----|----------|
| **Elasticsearch** | http://localhost:9200 | ูู ุฏูููุฉ |
| **Kibana** | http://localhost:5601 | ูู ุฏูููุฉ |
| **ุชุทุจูู BMS** | http://your-app-url | ูู 30 ุซุงููุฉ |

---

## 13. ุชุญุณูู ุงูุฃุฏุงุก ุงููุชูุฏู

### ุฅุนุฏุงุฏุงุช Elasticsearch ุงููุชูุฏูุฉ

```yaml
# ุชุญุณูู ุงูููุฑุณุฉ
index.refresh_interval: 30s
index.number_of_shards: 1
index.number_of_replicas: 0

# ุชุญุณูู ุงูุจุญุซ
index.search.slowlog.threshold.query.warn: 10s
index.search.slowlog.threshold.fetch.warn: 1s

# ุฅุฏุงุฑุฉ ุงูุฐุงูุฑุฉ
indices.fielddata.cache.size: 20%
indices.queries.cache.size: 10%
```

### ุฅุนุฏุงุฏุงุช Logstash ุงููุชูุฏูุฉ

```yaml
# ุชุญุณูู ุงููุนุงูุฌุฉ
pipeline.workers: 8
pipeline.batch.size: 2000
pipeline.batch.delay: 5

# ุฅุฏุงุฑุฉ ุงูุฐุงูุฑุฉ
queue.type: persisted
queue.max_bytes: 4gb
queue.checkpoint.writes: 1024
```

---

## 14. ุณููุงุฑูููุงุช ุงูุงุณุชุฎุฏุงู

### ููุชุทููุฑ ูุงูุงุฎุชุจุงุฑ

```yaml
# ุฅุนุฏุงุฏุงุช ูุฎููุฉ ููุชุทููุฑ
ES_JAVA_OPTS: -Xms1g -Xmx1g
LS_JAVA_OPTS: -Xms512m -Xmx512m

# ุชุนุทูู ุงูุฃูุงู ููุงุฎุชุจุงุฑ ุงูุณุฑูุน
xpack.security.enabled: false
```

### ููุฅูุชุงุฌ

```yaml
# ุฅุนุฏุงุฏุงุช ูุญุณูุฉ ููุฅูุชุงุฌ
ES_JAVA_OPTS: -Xms12g -Xmx12g
LS_JAVA_OPTS: -Xms4g -Xmx4g

# ุชูุนูู ุฌููุน ููุฒุงุช ุงูุฃูุงู
xpack.security.enabled: true
xpack.security.transport.ssl.enabled: true
xpack.security.http.ssl.enabled: true
```

---

## ุงูุฎูุงุตุฉ ูุงูุชูุตูุงุช ุงูููุงุฆูุฉ

### ุงูุฃููููุงุช ุงูุนุงููุฉ:
1. โ **ุชุญุฏูุซ ุฅุนุฏุงุฏุงุช ุงูุฐุงูุฑุฉ** ูุงุณุชุบูุงู ููุงุฑุฏ VPS ุจุดูู ุฃูุซู
2. โ **ุชูุนูู ููุงุชูุญ ุงูุชุดููุฑ** ูู Kibana ูุญูุงูุฉ ุงูุจูุงูุงุช
3. โ **ุฅุนุฏุงุฏ ูููุงุช ูุฑูุฑ ูููุฉ** ูุฌููุน ุงููุณุชุฎุฏููู
4. โ **ุชูููุฐ ุงุณุชุฑุงุชูุฌูุฉ ุงููุณุฎ ุงูุงุญุชูุงุทู** ุงูููููุฉ

### ุงูุฃููููุงุช ุงููุชูุณุทุฉ:
1. ๐ **ุชุญุณูู ุฌุฏููุฉ Logstash** ูุชูููู ุงูุญูู ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. ๐ **ุฅุนุฏุงุฏ ูุฑุงูุจุฉ ุงูุฃุฏุงุก** ุงููุณุชูุฑุฉ
3. ๐ **ุชุญุณูู ุฅุนุฏุงุฏุงุช ุงูุดุจูุฉ** ูุงูุฃูุงู

### ุงูุฃููููุงุช ุงูููุฎูุถุฉ:
1. ๐ **ุชุฎุตูุต ุฃุณูุงุก ุงูุฎุฏูุงุช** ูุชููู ุฃูุซุฑ ูุตููุฉ
2. ๐ **ุฅุถุงูุฉ ุฅุถุงูุงุช Elasticsearch** ุญุณุจ ุงูุญุงุฌุฉ
3. ๐ **ุชุญุณูู ูุงุฌูุฉ Kibana** ูุฅุถุงูุฉ ููุญุงุช ูุฑุงูุจุฉ ูุฎุตุตุฉ

### ูุตุงุฆุญ ููุตูุงูุฉ:
- **ูุฑุงูุจุฉ ููููุฉ**: ูุญุต ุงุณุชุฎุฏุงู ุงูููุงุฑุฏ ูุงูุณุฌูุงุช
- **ุชุญุฏูุซ ุฃุณุจูุนู**: ุชุทุจูู ุงูุชุญุฏูุซุงุช ุงูุฃูููุฉ
- **ูุฑุงุฌุนุฉ ุดูุฑูุฉ**: ุชุญููู ุงูุฃุฏุงุก ูุชุญุณูู ุงูุฅุนุฏุงุฏุงุช
- **ูุณุฎ ุงุญุชูุงุทู**: ุชุฃูุฏ ูู ุนูู ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ ุงูุชููุงุฆูุฉ

ูุฐุง ุงูุฏููู ูููุฑ ุฃุณุงุณุงู ูููุงู ูุชุดุบูู ELK Stack ุจููุงุกุฉ ุนูู VPS ุงูุฎุงุต ุจู ูุน ุงูุงุณุชูุงุฏุฉ ุงููุงููุฉ ูู ุงูููุงุฑุฏ ุงููุชุงุญุฉ ูุงูุญูุงุธ ุนูู ุฃุนูู ูุณุชููุงุช ุงูุฃูุงู ูุงูุฃุฏุงุก. ๐