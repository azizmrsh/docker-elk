# ===================================================================
# ملف إعدادات خط المعالجة الرئيسي في Logstash
# ===================================================================
# هذا الملف يحدد كيفية استقبال ومعالجة وإرسال البيانات
# يتكون من ثلاثة أقسام رئيسية: Input, Filter, Output
# ===================================================================

# ===================================================================
# قسم المدخلات (Input Section)
# ===================================================================
# يحدد مصادر البيانات التي يستقبلها Logstash
input {
	# ===================================================================
	# مدخل Beats (Filebeat, Metricbeat, etc.)
	# ===================================================================
	# يستقبل البيانات من Elastic Beats عبر بروتوكول Lumberjack
	beats {
		port => 5044				# المنفذ المخصص لاستقبال بيانات Beats
	}

	# ===================================================================
	# مدخل TCP العام
	# ===================================================================
	# يستقبل البيانات عبر بروتوكول TCP من أي مصدر
	tcp {
		port => 50000				# المنفذ المخصص لاستقبال بيانات TCP
	}
}

# ===================================================================
# قسم المرشحات (Filter Section)
# ===================================================================
# هنا يتم إضافة مرشحات معالجة البيانات وتحويلها
# مثل: grok, mutate, date, geoip, etc.
## Add your filters / logstash plugins configuration here

# ===================================================================
# قسم المخرجات (Output Section)
# ===================================================================
# يحدد وجهات إرسال البيانات المعالجة
output {
	# ===================================================================
	# مخرج Elasticsearch
	# ===================================================================
	# يرسل البيانات المعالجة إلى Elasticsearch للفهرسة والتخزين
	elasticsearch {
		hosts => "elasticsearch:9200"			# عنوان خادم Elasticsearch
		user => "logstash_internal"				# اسم المستخدم للمصادقة
		password => "${LOGSTASH_INTERNAL_PASSWORD}"	# كلمة المرور من متغير البيئة
	}
}
